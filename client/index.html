<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" href="./favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app"/>
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <title>Madden RedZone</title>

    <script data-ad-client="ca-pub-4424826598376439" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
    <div id="application-container">
        <div class="application-logo">
            <img src="./logo.png" alt="logo" />
            <select id="display">
                <option value="180">Small</option>
                <option value="360" selected="selected">Medium</option>
                <option value="720">Large</option>
            </select>
        </div>
        <div class="application-streams" >
            <div class="twitch-row" id="sortable">
                <div class="twitch-container" >
                    <div class="twitch-user">junniboy01<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="arjun-twitch"></div>
                </div>
                <div class="twitch-container">
                    <div class="twitch-user">dylp123<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="dylan-twitch"></div>
                </div>
                <div class="twitch-container">
                    <div class="twitch-user">chig32<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="chirag-twitch"></div>
                </div>
                <div class="twitch-container">
                    <div class="twitch-user">nicknguyen24<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="nick-twitch"></div>
                </div>
                <div class="twitch-container">
                    <div class="twitch-user">siddyk86<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="sid-twitch"></div>
                </div>
                <div class="twitch-container">
                    <div class="twitch-user">hoostrash69<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="ajay-twitch"></div>
                </div>
                <div class="twitch-container">
                    <div class="twitch-user">hoorules69<div class="drag-to-reoder"><i class="fas fa-arrows-alt"></i></div></div>
                    <div id="eric-twitch"></div>
                </div>
            </div>
        </div>

    </div>

    <script type="text/javascript">
        var moved = {}
        $( function() {
            $( "#sortable" ).sortable();
        } );
        function autoSort(name) {
            try {
                if (moved[name]) return true
                const items = document.getElementsByClassName('twitch-container')
                for (let i in items) {
                    if (items[i] && items[i].innerHTML && items[i].innerHTML.includes(name)) {
                        const parent = items[i].parentNode;
                        const detatchedItem = parent.removeChild(items[i]);
                        parent.insertBefore(detatchedItem, items[0]);
                        moved[name] = true
                    }
                }
            } catch (e) {return true}
        }
        function embedTwitch(height) {
            new Twitch.Embed("arjun-twitch", {
                width: '100%',
                height: height,
                channel: "junniboy01",
                layout: "video",
                muted: true
            });
            new Twitch.Embed("dylan-twitch", {
                width: '100%',
                height: height,
                channel: "dylp123",
                layout: "video",
                muted: true
            }).addEventListener(Twitch.Embed.VIDEO_PLAY, function() {
                autoSort('dylan-twitch')
            });
            new Twitch.Embed("chirag-twitch", {
                width: '100%',
                height: height,
                channel: "chig32",
                layout: "video",
                muted: true
            }).addEventListener(Twitch.Embed.VIDEO_PLAY, function() {
                autoSort('chirag-twitch')
            });
            new Twitch.Embed("nick-twitch", {
                width: '100%',
                height: height,
                channel: "nicknguyen24",
                layout: "video",
                muted: true
            }).addEventListener(Twitch.Embed.VIDEO_PLAY, function() {
                autoSort('nick-twitch')
            });
            new Twitch.Embed("sid-twitch", {
                width: '100%',
                height: height,
                channel: "siddyk86",
                layout: "video",
                muted: true
            }).addEventListener(Twitch.Embed.VIDEO_PLAY, function() {
                autoSort('sid-twitch')
            });
            new Twitch.Embed("ajay-twitch", {
                width: '100%',
                height: height,
                channel: "hoostrash69",
                layout: "video",
                muted: true
            }).addEventListener(Twitch.Embed.VIDEO_PLAY, function() {
                autoSort('ajay-twitch')
            });
            new Twitch.Embed("eric-twitch", {
                width: '100%',
                height: height,
                channel: "hoorules69",
                layout: "video",
                muted: true
            }).addEventListener(Twitch.Embed.VIDEO_PLAY, function() {
                autoSort('eric-twitch')
            });
        }
        embedTwitch(360);
        $( "#display" ).change(function() {
            $("#arjun-twitch").html("");
            $("#dylan-twitch").html("");
            $("#chirag-twitch").html("");
            $("#nick-twitch").html("");
            $("#sid-twitch").html("");
            $("#ajay-twitch").html("");
            $("#eric-twitch").html("");
            embedTwitch(this.value);
        });
    </script>

</body>
</html>
